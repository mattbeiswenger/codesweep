<!DOCTYPE html>

{% load staticfiles %}

<html lang="en">
  <head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../static/css/bootstrap.css">
    <link rel="stylesheet" href="../../static/css/bootstrap-grid.css">
    <link rel="stylesheet" href="../../static/css/bootstrap-reboot.css">

	<title>CodeSweep | Assignments</title>
  </head>
  <body>


	<!-- NAVIGATION -->
	<nav class="navbar navbar-expand-md navbar-dark bg-info">
		<div class="container">
			<a href="/assignments/" class="navbar-brand">Codesweep</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar7">
		        <span class="navbar-toggler-icon"></span>
		    </button>
			<div class="navbar-collapse collapse justify-content-stretch" id="navbar7">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item">
						<a class="nav-link" href="/assignments/">Assignments</a>
					</li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Account</a>

						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" href="#">Action</a>
							<a class="dropdown-item" href="#">Another action</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="/logout">Logout</a>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<!--  -->


	<div class="container pt-5">


		<div class="row justify-content-between">


			<div class="col-md-4 mt-5">



				<!-- {% if courses %}
				<div class="card w-100">
					<div class="card-header">
						Courses
					</div>
					<div class="list-group">
						<a href="#" class="list-group-item list-group-item-action">All</a> {% for course in courses %}
						<a href="{{ course.subject }}{{ course.number }}" class="list-group-item list-group-item-action">{{ course.subject }} {{ course.number }}</a> {% endfor %}
					</div>
				</div>
				{% endif %} -->
				<!--  -->


                <!--  COURSES CARD -->
				<div id="accordion">
                  {% for term in terms %}
				  <div class="card">
				    <div class="card-header" id="heading{{forloop.counter}}" >
				        <a class="btn btn-link" data-toggle="collapse" data-target="#body{{ forloop.counter }}" aria-expanded="true" aria-controls="{{ forloop.counter }}">
						<i class="fa fa-chevron-down"></i>
				          {{ term.term__season }}/{{ term.term__year }}
					  </a>
				    </div>

				    <div id="body{{ forloop.counter }}" class="collapse {%if forloop.counter == 1%}show{%endif%}" aria-labelledby="heading{{forloop.counter}}" data-parent="#accordion">
						<div class="list-group">
    						{% for course in courses %}

                            {% if course.term.year == term.term__year %}
                            {% if course.term.season == term.term__season %}
    						<a href="{{ course.season }}{{ course.year }}" class="list-group-item list-group-item-action">{{ course.subject }} {{ course.number }} {{ course.section }}</a>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
    					</div>
				    </div>
				  </div>
                  {% endfor %}
				</div>
			</div>


			<!--  ASSIGNMENTS -->
			<div class="animated bounceInUp col col-lg-8 mb-5">
				{% if assignments %} {% for assignment in assignments %}
				<div class="card mt-5">
					<div class="card-header">
						<div>
							Due {{ assignment.date_due }} at {{ assignment.time_due }}
							<div class="float-right">
								Points: {{ assignment.points }}
							</div>
						</div>
					</div>
					<div class="card-body">
						<h5 class="card-title">{{ assignment.title }}</h5>
						<p class="card-text">{{ assignment.description|truncatewords:50|linebreaks }}</p>
						<a href="{{ assignment.slug }}" class="btn btn-primary float-right btn-info">Get Started</a>
					</div>
				</div>
				{% endfor %}
			</div>
			<!--  -->
			{% else %}
			<div class="display-3 text-center mt-4"> Homework will be posted momentarily </div>
			{% endif %}
		</div>
	</div>

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../../static/scripts/bootstrap.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../static/scripts/bootstrap.bundle.js" charset="utf-8"></script>
	<!--  Font Awesome -->
	<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

	<script>
		$(document).ready(function() {


			// {% for course in courses %}
			// alert("{{ course.subject }}");
			// {% endfor %}

			$('#myList a').click(function(e) {
				e.preventDefault()
				$(this).tab('show')
			})
			// send user data to view
			$.ajax({
				url: '/assignments/',
				type: "POST",
				data: {
					"user": "{{ request.user.username }}",
					"csrfmiddlewaretoken": "{{ csrf_token }}",
				},

				success: function(data) {
					// alert(data.greeting)
				}
			});
		});
	</script>
</body>
</html>
